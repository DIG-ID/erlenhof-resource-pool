---

import { authSession, getUserData } from "../hooks/auth";
const user = await authSession(Astro);
if (!user) {
  return Astro.redirect("/login");
}
const userData = await getUserData(user);

import Layout from './Layout.astro';
import Page from "@/app/dashboard/page";


const { title } = Astro.props;
const defaultSidebarOpen = Astro.cookies.get('sidebar:state')?.value === 'true';

---

<Layout title={title}>
  <Page client:load defaultSidebarOpen={defaultSidebarOpen} user={userData}>
    <slot />
  </Page>
</Layout>