---

import Layout from "@/layouts/Layout.astro";
import Dashboard from "@/components/Dashboard.astro";
import ProtectedComponent from "@/components/protected-component";
import WidgetJobs from "@/components/widgets/WidgetJobs.astro"
import WidgetUsers from "@/components/widgets/WidgetUsers.astro"
import WidgetJobOpen from "@/components/widgets/WidgetJobOpen.astro"
import WidgetJobAssigned from "@/components/widgets/WidgetJobAssigned.astro"

const { userData } = Astro.locals;

---

<Layout title="Dashboard">
  <Dashboard>
    <ProtectedComponent allowedRoles={["admin", "super_admin"]} userRole={userData.role}>
      <WidgetJobs class="mb-12" />
      <WidgetUsers />
    </ProtectedComponent>
    <ProtectedComponent allowedRoles={["level_01", "level_02"]} userRole={userData.role}>
      <WidgetJobOpen />
      <WidgetJobAssigned />
    </ProtectedComponent>
  </Dashboard>
</Layout>
