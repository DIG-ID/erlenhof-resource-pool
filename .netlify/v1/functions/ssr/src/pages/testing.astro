---
import Layout from '@/layouts/Layout.astro';
import { SelectDemo } from '@/components/select-demo';




import { app } from "@/firebase/server";
import { getFirestore } from "firebase-admin/firestore";
import { SelectRole } from '@/components/select-role';


interface Role {
  id: string;
  name: string;
}

// Inicializa o Firestore com o Firebase Admin SDK
const db = getFirestore(app);

// Busca os dados da coleção "roles"
const rolesRef = db.collection("roles");
const rolesSnapshot = await rolesRef.get();
const roles = rolesSnapshot.docs.map((doc) => ({
  id: doc.id,
  ...doc.data(),
})) as Role[];

---

<Layout title="Testing">
  <h1 class="text-4xl font-bold">Testing</h1>
  <p class="text-lg text-gray-500">This is a test page</p>
  <div class="flex flex-col items-center justify-center h-screen">




    <SelectRole roles={roles} client:load/>

    <SelectDemo client:load/>

    <form action="/api/create-job" method="POST">
      <label for="title">Job Title:</label>
      <input type="text" id="title" name="title" required />
    

    
      <button type="submit">Create Job</button>
    </form>



  </div>
  
</Layout>

